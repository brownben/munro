(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49ff6e8e"],{"02c0":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown-input relative top--4"},[n("label",{staticClass:"font-heading text-sm text-main p-1 mx-3 bg-white relative select-none bottom--3"},[e._v(e._s(e.label))]),n("div",{staticClass:"visible w-full border border-main rounded-tl-lg rounded-br-lg px-4 py-2 outline-none",on:{click:e.toggle}},[n("p",{staticClass:"leading-normal h-6 truncate"},[e._v(e._s(e.currentValue))]),n("svg",{staticClass:"h-8 text-main float-right fill-current mr--3 mt--68/10",attrs:{viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}}),n("path",{attrs:{d:"M0-.75h24v24H0z",fill:"none"}})])]),n("transition",{attrs:{name:"open"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"dropdown absolute text-body z-40 bg-white text-center w-full border border-main select-none border-t-0 mb-2"},e._l(e.list,(function(t){return n("p",{key:t,staticClass:"select-none leading-normal text-center px-3 py-2 truncate hover:bg-main-veryLight",on:{click:function(n){return e.changeSelection(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])],1)},a=[],r={name:"DropdownInput",props:{label:{type:String,default:""},value:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{open:!1,currentValue:this.value}},watch:{value:function(e){this.currentValue=e}},methods:{changeSelection:function(e){this.open=!1,this.currentValue=e,this.$emit("input",e)},toggle:function(){this.open=!this.open,this.open&&this.$emit("opened")}}},s=r,i=(n("5b39"),n("2877")),c=Object(i["a"])(s,o,a,!1,null,"1340ed04",null);t["a"]=c.exports},"5b39":function(e,t,n){"use strict";var o=n("eb05"),a=n.n(o);a.a},7321:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"view"},[n("vue-headful",{attrs:{head:{meta:{name:"robots",content:"noindex"}},title:"Munro - Merge Competitors",description:""}}),n("h1",{staticClass:"text-main text-3xl font-normal font-heading mb-2"},[e._v(" Merge Competitors ")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.merge(t)}}},[n("dropdown-input",{attrs:{list:e.leagues.map((function(e){return e.name})),"include-blank":!0,label:"League:"},model:{value:e.league,callback:function(t){e.league=t},expression:"league"}}),n("dropdown-input",{attrs:{list:e.coursesInLeague,"include-blank":!0,label:"Course:"},model:{value:e.course,callback:function(t){e.course=t},expression:"course"}}),n("dropdown-input",{attrs:{list:e.competitorsForLeague.map((function(e){return e.id+" - "+e.name+" - "+e.ageClass+" - "+e.club})),"include-blank":!0,label:"Competitor to Keep:"},model:{value:e.competitorKeep,callback:function(t){e.competitorKeep=t},expression:"competitorKeep"}}),n("dropdown-input",{attrs:{list:e.competitorsForLeague.map((function(e){return e.id+" - "+e.name+" - "+e.ageClass+" - "+e.club})),"include-blank":!0,label:"Competitor to be Merged:"},model:{value:e.competitorMerge,callback:function(t){e.competitorMerge=t},expression:"competitorMerge"}}),n("button",{staticClass:"button-lg"},[e._v("Merge Competitors")])],1)],1)},a=[],r=n("bc3a"),s=n.n(r),i=n("02c0"),c={components:{DropdownInput:i["a"]},data:function(){return{competitors:[],leagues:[],league:"",competitorMerge:"",competitorKeep:"",course:""}},computed:{competitorsForLeague:function(){var e=this,t=this.competitors.filter((function(t){return t.league===e.league&&t.course===e.course}));return t.sort((function(e,t){return e.name>t.name}))},coursesInLeague:function(){var e=this,t=this.leagues.filter((function(t){return t.name===e.league}));return t.length>0?t[0].courses:[]}},mounted:function(){this.getCompetitors(),this.getLeagues()},methods:{getCompetitors:function(){var e=this;return s.a.get("/api/competitors").then((function(t){e.competitors=t.data})).catch((function(){return e.$messages.addMessage("Problem Fetching Competitors")}))},getLeagues:function(){var e=this;return s.a.get("/api/leagues").then((function(t){e.leagues=t.data})).catch((function(){return e.$messages.addMessage("Problem Fetching League Details")}))},validateForm:function(){return this.competitorMerge!==this.competitorKeep&&""!==this.competitorMerge&&""!==this.competitorKeep},merge:function(){var e=this;if(this.validateForm())return s.a.post("/api/competitors/merge",{competitorKeep:this.competitorKeep.split(" -")[0],competitorMerge:this.competitorMerge.split(" -")[0]}).then((function(t){return e.returnToCompetitorsPage(t)})).catch((function(t){return e.$messages.addMessage(t.response.data.message)}));this.$messages.addMessage("The Competitors Selected are the Same")},returnToCompetitorsPage:function(e){this.$messages.addMessage(e.data.message),this.$router.push("/competitors")},competitorTransformForSelect:function(e){return e.club&&e.ageClass?"".concat(e.name," (").concat(e.ageClass,", ").concat(e.club,") [").concat(e.id,"]"):e.club?"".concat(e.name," (").concat(e.club,") [").concat(e.id,"]"):e.ageClass?"".concat(e.name," (").concat(e.ageClass,") [").concat(e.id,"]"):"".concat(e.name," [").concat(e.id,"]")}}},u=c,l=n("2877"),p=Object(l["a"])(u,o,a,!1,null,null,null);t["default"]=p.exports},eb05:function(e,t,n){}}]);
//# sourceMappingURL=chunk-49ff6e8e-legacy.6f2ea0bd.js.map