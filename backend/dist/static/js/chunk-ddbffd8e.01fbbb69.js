(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddbffd8e"],{"13ec":function(e,t,a){"use strict";var s=a("3f8b"),n=a.n(s);n.a},2679:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vue-headful",{attrs:{title:"Munro - Upload Results",description:"Upload results to Munro, the Fast and Easy Results System for Orienteering Leagues. A simple way to calculate the results for orienteering leagues, with search and sort features",url:"https://munro-leagues.herokuapp.com/upload"}}),a("h1",[e._v("Upload Results")]),a("label",[e._v("Event ID:")]),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.eventId,expression:"eventId",modifiers:{trim:!0,lazy:!0}}],attrs:{type:"text"},domProps:{value:e.eventId},on:{change:[function(t){e.eventId=t.target.value.trim()},function(t){return e.findEvent()}],blur:function(t){return e.$forceUpdate()}}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.event.name,expression:"event.name"}],attrs:{id:"eventName"}},[a("b",[e._v("Event Name:")]),e._v("\n    "+e._s(e.event.name)+"\n  ")]),a("label",[e._v("Upload Key:")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.uploadKey,expression:"uploadKey",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.uploadKey},on:{input:function(t){t.target.composing||(e.uploadKey=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",[e._v("Results File:")]),a("div",{staticClass:"file-input"},[a("label",{staticClass:"button",attrs:{for:"file"}},[e._v("Browse for File")]),a("input",{attrs:{id:"file",type:"file",accept:".csv"},on:{change:e.fileChange}}),a("p",[e._v(e._s(e.fileName))])]),e.event.resultUploaded?a("Checkbox",{attrs:{label:"Overwrite Existing Results:"},model:{value:e.overwrite,callback:function(t){e.overwrite=t},expression:"overwrite"}}):e._e(),a("label",[e._v("Results (URL):")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.results,expression:"results",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.results},on:{input:function(t){t.target.composing||(e.results=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",[e._v("Routegadget (URL):")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.routegadget,expression:"routegadget",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.routegadget},on:{input:function(t){t.target.composing||(e.routegadget=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",[e._v("Winsplits (URL):")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.winsplits,expression:"winsplits",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.winsplits},on:{input:function(t){t.target.composing||(e.winsplits=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e.eventId&&e.uploadKey&&e.file?a("button",{attrs:{id:"uploadButton"},on:{click:e.uploadFile}},[e._v("Upload File")]):e._e()],1)},n=[],i=a("bc3a"),r=a.n(i),l=a("c824"),o={components:{Checkbox:l["a"]},data:function(){return{eventId:"",uploadKey:"",event:{},fileName:"Select a File",file:"",overwrite:!1,results:"",routegadget:"",winsplits:""}},mounted:function(){this.$route.params.id&&(this.eventId=this.$route.params.id,this.findEvent())},methods:{findEvent:function(){return r.a.get("/api/events/"+this.eventId).then(e=>{this.event=e.data,this.event.name||(this.event={},this.event.name="No Event Found")}).catch(()=>this.$messages.addMessage("Problem Fetching Event Name"))},fileChange:function(e){const t=e.target||e.dataTransfer,a=t.files;if(!a||!a.length)return!1;this.fileName=a[0].name,this.readFile(a[0])},readFile:function(e){const t=new FileReader;t.onload=this.readFileResult,t.readAsText(e)},readFileResult:function(e){this.file=e.target.result},uploadFile:function(){return this.$messages.addMessage("Upload Data Sent"),r.a.post("/api/upload",{eventId:this.eventId,uploadKey:this.uploadKey,file:this.file,overwrite:this.overwrite,results:this.results,winsplits:this.winsplits,routegadget:this.routegadget}).then(()=>{this.$messages.addMessage("Results Uploaded Successfully"),this.$router.push("/leagues/"+this.event.league)}).catch(e=>this.$messages.addMessage(e.response.data.message))}}},u=o,d=(a("13ec"),a("2877")),c=Object(d["a"])(u,s,n,!1,null,"5d71b21c",null);t["default"]=c.exports},"3f8b":function(e,t,a){},"562b":function(e,t,a){"use strict";var s=a("900d"),n=a.n(s);n.a},"900d":function(e,t,a){},c824:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkbox-input"},[a("label",[e._v("\n    "+e._s(e.label)+"\n    "),a("input",{attrs:{type:"checkbox"},domProps:{checked:e.value},on:{change:function(t){return e.$emit("input",t.target.checked)}}}),a("span")])])},n=[],i={name:"CheckboxInput",props:{value:{type:Boolean,default:!1},label:{type:String,default:""}}},r=i,l=(a("562b"),a("2877")),o=Object(l["a"])(r,s,n,!1,null,"70403901",null);t["a"]=o.exports}}]);
//# sourceMappingURL=chunk-ddbffd8e.01fbbb69.js.map