(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-222c3661"],{"02c0":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown-input relative top--4"},[n("label",{staticClass:"font-heading text-sm text-main p-1 mx-3 bg-white relative select-none bottom--3"},[t._v(t._s(t.label))]),n("div",{staticClass:"visible w-full border border-main rounded-tl-lg rounded-br-lg px-4 py-2 outline-none",on:{click:t.toggle}},[n("p",{staticClass:"leading-normal h-6 truncate"},[t._v(t._s(t.currentValue))]),n("svg",{staticClass:"h-8 text-main float-right fill-current mr--3 mt--68/10",attrs:{viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}}),n("path",{attrs:{d:"M0-.75h24v24H0z",fill:"none"}})])]),n("transition",{attrs:{name:"open"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"dropdown absolute text-body z-40 bg-white text-center w-full border border-main select-none border-t-0 mb-2"},t._l(t.list,(function(e){return n("p",{key:e,staticClass:"select-none leading-normal text-center px-3 py-2 truncate hover:bg-main-veryLight",on:{click:function(n){return t.changeSelection(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])],1)},a=[],r={name:"DropdownInput",props:{label:{type:String,default:""},value:{type:String,default:""},list:{type:Array,default:function(){return[]}}},data:function(){return{open:!1,currentValue:this.value}},watch:{value:function(t){this.currentValue=t}},methods:{changeSelection:function(t){this.open=!1,this.currentValue=t,this.$emit("input",t)},toggle:function(){this.open=!this.open,this.open&&this.$emit("opened")}}},o=r,i=(n("5b39"),n("2877")),u=Object(i["a"])(o,s,a,!1,null,"1340ed04",null);e["a"]=u.exports},"5b39":function(t,e,n){"use strict";var s=n("eb05"),a=n.n(s);a.a},"761e":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[n("vue-headful",{attrs:{head:{meta:{name:"robots",content:"noindex"}},title:"Munro - Transfer Results",description:""}}),n("h1",{staticClass:"text-main text-3xl font-normal font-heading mb-2"},[t._v(" Transfer Result ")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.transfer(e)}}},[n("dropdown-input",{attrs:{list:t.leagues.map((function(t){return t.name})),"include-blank":!0,label:"League:"},model:{value:t.league,callback:function(e){t.league=e},expression:"league"}}),n("dropdown-input",{attrs:{list:t.eventsInLeague.map((function(t){return t.name+" - "+t.date})),"include-blank":!0,label:"Event:"},model:{value:t.event,callback:function(e){t.event=e},expression:"event"}}),n("dropdown-input",{attrs:{list:t.coursesInLeague,"include-blank":!0,label:"Course"},model:{value:t.course,callback:function(e){t.course=e},expression:"course"}}),n("dropdown-input",{attrs:{list:t.resultsForEvent.map((function(e){return e.position+" - "+t.elapsedTime(e.time)+" ("+e.name+")"})),"include-blank":!0,label:"Result:"},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}}),n("dropdown-input",{attrs:{list:t.competitorsForLeague.map(t.competitorTransformForSelect),"include-blank":!0,label:"Competitor:"},model:{value:t.competitor,callback:function(e){t.competitor=e},expression:"competitor"}}),n("button",{staticClass:"button-lg"},[t._v("Transfer Result")])],1)],1)},a=[],r=n("bc3a"),o=n.n(r),i=n("02c0"),u={components:{DropdownInput:i["a"]},data:function(){return{competitors:[],leagues:[],events:[],results:[],league:"",event:"",course:"",competitor:"",result:""}},computed:{competitorsForLeague:function(){var t=this,e=this.competitors.filter((function(e){return e.league===t.league&&e.course===t.course}));return e.sort((function(t,e){return t.name>e.name}))},coursesInLeague:function(){var t=this,e=this.leagues.filter((function(e){return e.name===t.league}));return e.length>0?e[0].courses:[]},eventsInLeague:function(){var t=this;return this.events.filter((function(e){return e.league===t.league}))},resultsForEvent:function(){var t=this,e="",n=this.events.filter((function(e){return e.name===t.event.split(" - ")[0]&&e.date===t.event.split(" - ")[1]}));return n.length>0&&(e=n[0].id),this.results.filter((function(n){return n.event===e&&n.course===t.course})).sort((function(t,e){return parseInt(t.position,10)===parseInt(e.position,10)?0:null===t.position||void 0===t.position?1:null===e.position||void 0===e.position?-1:parseInt(t.position,10)>parseInt(e.position,10)?1:-1}))}},created:function(){this.getCompetitors(),this.getLeagues(),this.getEvents(),this.getResults()},methods:{getCompetitors:function(){var t=this;return o.a.get("/api/competitors").then((function(e){t.competitors=e.data})).catch((function(){return t.$messages.addMessage("Problem Fetching Competitors")}))},getLeagues:function(){var t=this;return o.a.get("/api/leagues").then((function(e){t.leagues=e.data})).catch((function(){return t.$messages.addMessage("Problem Fetching Leagues")}))},getEvents:function(){var t=this;return o.a.get("/api/events").then((function(e){t.events=e.data})).catch((function(){return t.$messages.addMessage("Problem Fetching Events")}))},getResults:function(){var t=this;return o.a.get("/api/results").then((function(e){t.results=e.data})).catch((function(){return t.$messages.addMessage("Problem Fetching Results")}))},validateForm:function(){return""!==this.event&&""!==this.course&&""!==this.result&&""!==this.competitor},twoDigits:function(t){return t.toString().length<2?"0".concat(t.toString()):t},elapsedTime:function(t){var e=Math.floor(t/60),n=Math.abs(t%60);return"".concat(this.twoDigits(e),":").concat(this.twoDigits(n))},elapsedTimeToSeconds:function(t){return 60*parseInt(t.split(":")[0],10)+parseInt(t.split(":")[1],10)},competitorTransformForSelect:function(t){return t.club&&t.ageClass?"".concat(t.name," (").concat(t.ageClass,", ").concat(t.club,") [").concat(t.id,"]"):t.club?"".concat(t.name," (").concat(t.club,") [").concat(t.id,"]"):t.ageClass?"".concat(t.name," (").concat(t.ageClass,") [").concat(t.id,"]"):"".concat(t.name," [").concat(t.id,"]")},transfer:function(){var t=this;if(this.validateForm()){var e="",n=this.events.find((function(e){return e.name===t.event.split(" - ")[0]&&e.date===t.event.split(" - ")[1]}));n&&(e=n.id);var s=this.competitor.replace(/.*\[|\]/g,""),a=this.results.find((function(n){return n.course===t.course&&n.event===e&&n.time===t.elapsedTimeToSeconds(t.result.match(/-.*\(/)[0].slice(2,-2))}));return o.a.post("/api/results/transfer",{competitor:s,result:a.id}).then((function(e){return t.returnToCompetitorsPage(e)})).catch((function(e){return t.$messages.addMessage(e.response.data.message)}))}this.$messages.addMessage("Please Select a Result and a Competitor")},returnToCompetitorsPage:function(t){this.$messages.addMessage(t.data.message),this.$router.push("/competitors")}}},c=u,l=n("2877"),p=Object(l["a"])(c,s,a,!1,null,null,null);e["default"]=p.exports},eb05:function(t,e,n){}}]);
//# sourceMappingURL=chunk-222c3661-legacy.611505e9.js.map